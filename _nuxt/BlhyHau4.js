import{_ as k}from"./D3AGyXMT.js";import{_ as T,c as r,o,b as d,a as u,F as _,g as j,t as m,n as f,S as p,T as b,d as N,r as U,ay as C,e as V}from"./Bad3uSeb.js";import{L as B}from"./D94BcSI6.js";import{S as O}from"./CSnbc8Io.js";import"./hORRRQtm.js";const E={tagName:"job-list-entry",computed:{classList(){return["job-list__entry",`${b.isTrue(this.isInvisible)===!0?p.HIDDEN:""}`,"vue-component"]}},props:{title:String,gender:String,city:String,team:String,positionType:String,isInvisible:{default:null},id:Number}},P=["data-id"],F={class:"job-list__entry-header"},z={class:"job-list__entry-content"},A={class:"job-list__entry-title"},H={class:"job-list__entry-gender"};function M(s,t,e,a,l,n){return o(),r("div",{class:f(n.classList),"data-id":e.id},[d("div",F,[e.team&&e.team!==""?(o(),r(_,{key:0},[j(m(e.team),1)],64)):u("",!0)]),d("div",z,[d("div",A,[j(m(e.title)+" ",1),d("span",H,m(e.gender),1)])])],10,P)}const G=T(E,[["render",M]]);E.__docgenInfo={exportName:"default",displayName:"job-list-entry",description:"",tags:{},props:[{name:"title",type:{name:"string"}},{name:"gender",type:{name:"string"}},{name:"city",type:{name:"string"}},{name:"team",type:{name:"string"}},{name:"positionType",type:{name:"string"}},{name:"isInvisible",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"id",type:{name:"number"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/job-list-entry.vue"]};const I={tagName:"job-list",computed:{classList(){return["job-list container",`${this.hasLoading?p.LOADING:""}`,`${this.hasLoader?"loading":""}`,`${b.isTrue(this.sticky)===!0?O.rootSelector.substring(1):""}`,"vue-component"]},expandClassList(){return["job-list__expand-button",`${this.hasExpand?"":p.HIDDEN}`,`${this.isExpandVisible?"":p.INVISIBLE}`]},headlineClassValue(){return`job-list__headline ${this.headlineClasses}`},headlineLevelValue(){return`${this.headlineLevel?this.headlineLevel:"h2"}`},tagList(){return this.tags?this.tags.split(","):void 0}},mounted(){this.api=new C({...this.jobId&&{jobId:this.jobId},...this.apiUrl&&{apiUrl:this.apiUrl},client_name:this.clientName}),this.lang&&this.api.setLang(this.lang),this.tagList&&this.api.setFilter({tags:this.tagList}),this.loading=new B(this.$refs["job-list"],()=>{this.hasLoader=!0}),this.loading.on(!0),this.init()},methods:{init(){var e;const s=(e=window.i18n)==null?void 0:e.loader,t=this.jobId?this.loadJob:this.loadJobs;s?s.then(()=>{var a;this.translationData=(a=window.i18n)==null?void 0:a.getTranslationData(["jobListEmpty"]),t.bind(this)()}):t()},handleExpand(){this.isExpandVisible=!1,this.hasExpand=!1,this.showJobs()},showJobs(){this.entries.forEach(s=>{s.isInvisible=!1})},loadJobData(){const s=`${this.api.jobDataUrl}jobs.json`;return fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{this.jobData=t}).catch(t=>{console.error("Job-list Local Job Data Error:",t)})},loadJob(s){const t=s?"getAll":"getOpening";this.promises.push(this.loadJobData()),this.api[t]().then(e=>e.json()).then(e=>{this.handleJobs(e)}).catch(e=>{console.error("Job-list Error:",e)})},loadJobs(){this.loadJob(!0)},handleJobs(s){b.sleep(this.sleepDelay).then(()=>{let t=s;if(typeof t.objects!="object"&&(t={objects:[t],meta:t==null?void 0:t.meta}),this.data=t,!this.data.meta)return this.loading.off();Promise.all(this.promises).then(()=>{const e=this.api.getOrderedList(t.objects);this.filterJobs(s,e)}).catch(e=>{console.error("Job-List Promises.all ~ error",e)})})},filterJobs(s,t){var n,h;this.data.objects=t;const e=this.$t("gender"),a=[];let l=0;for(let c=0;c<(t==null?void 0:t.length);c++){const i=t[c],{city:S}=(i==null?void 0:i.location)||{};if(!i)continue;const{title:w,position_type:x,team:D}=i,J={city:S,title:w,gender:e,team:D,positionType:x!==""?(n=window.i18n)==null?void 0:n.translate(x):null,isInvisible:this.maxItems>0&&l>this.maxItems-1,id:c};this.isAvailableEntry(i)&&(a[c]=J,l++)}this.entries=a,this.entries.length===0&&(this.isEmpty=!0),this.maxItems>0&&((h=s.objects)==null?void 0:h.length)>this.maxItems&&this.showExpandButton(),this.stopLoading()},showExpandButton(){this.hasExpand=!0,setTimeout(()=>{this.isExpandVisible=!0},this.loadingDelay)},isAvailableEntry(s){var e;let t=!0;if(s.tags.includes(this.api.hiddenTag))return!1;if(this.team){const a=(e=s.team)==null?void 0:e.toLowerCase(),l=this.team.toLowerCase();(a===void 0||(a==null?void 0:a.indexOf(l))===-1)&&(t=!1)}return t},stopLoading(){setTimeout(()=>{this.loading.off(!0,!0),this.hasLoading=!1},this.loadingDelay)},handleEntryClick(s){const t=s.currentTarget;if(t&&this.detailUrl){const e=this.getData(t),a=this.getDetailUrl(e),l=b.generateUrl(e==null?void 0:e.title,a,e==null?void 0:e.id);document.location.href=l}},getData(s){var e;let t=null;return s&&s.dataset.id&&((e=this.data)!=null&&e.objects)&&(t=this.data.objects[s.dataset.id]),t},getDetailUrl(s){if(typeof this.detailUrl!="object")return this.detailUrl;const t=this.api.getLangFromEntry(s);return this.detailUrl[t]||this.detailUrl.default}},data(){return{translationData:null,loadingDelay:300,sleepDelay:1300,loading:{},hasLoading:!0,hasLoader:!1,api:{},hasExpand:!1,isExpandVisible:!1,entries:[],jobData:{},promises:[],isEmpty:!1}},props:{clientName:String,maxItems:String,detailUrl:Object,jobId:String,tags:String,lang:String,team:String,apiUrl:String,headlineClasses:String,headlineLevel:String,headlineText:String,expandText:String,sublineText:String,sticky:{default:null}}},W=["data-id","data-max-items","data-detail-url","data-job-id","data-tags","data-lang","data-team","data-api-url"],Y={class:"row"},q={class:"job-list__header col-lg-12"},K={key:0,class:"job-list__meta col-lg-7"},Q={class:"job-list__subline"},R={class:"col-lg-12"},X={class:"job-list__entries"},Z={key:0,class:"job-list__message h3-font-size"},$={key:0},ee={key:1};function te(s,t,e,a,l,n){const h=k,c=G;return o(),r("div",{class:f(n.classList),"data-id":e.clientName,"data-max-items":e.maxItems,"data-detail-url":e.detailUrl,"data-job-id":e.jobId,"data-tags":e.tags,"data-lang":e.lang,"data-team":e.team,"data-api-url":e.apiUrl,ref:"job-list"},[d("div",Y,[d("div",q,[N(h,{text:e.headlineText,level:n.headlineLevelValue,classes:n.headlineClassValue},null,8,["text","level","classes"])]),e.sublineText!==""?(o(),r("div",K,[d("div",Q,m(e.sublineText),1)])):u("",!0),d("div",R,[d("div",X,[l.isEmpty?(o(),r("div",Z,[n.tagList.includes("young_professionals")?(o(),r("div",$,m(s.$t("jobListYoungProfessionalsEmpty")),1)):(o(),r("div",ee,m(s.$t("jobListEmpty")),1))])):u("",!0),(o(!0),r(_,null,U(l.entries,i=>(o(),r(_,{key:i==null?void 0:i.id},[i?(o(),V(c,{key:0,title:i==null?void 0:i.title,gender:i==null?void 0:i.gender,city:i==null?void 0:i.city,team:i==null?void 0:i.team,"position-type":i==null?void 0:i.positionType,"is-invisible":i==null?void 0:i.isInvisible,id:i==null?void 0:i.id,onClick:n.handleEntryClick},null,8,["title","gender","city","team","position-type","is-invisible","id","onClick"])):u("",!0)],64))),128))]),d("div",{class:f(n.expandClassList),onClick:t[0]||(t[0]=(...i)=>n.handleExpand&&n.handleExpand(...i))},m(e.expandText),3)])])],10,W)}const ie=T(I,[["render",te]]);I.__docgenInfo={exportName:"default",displayName:"job-list",description:"",tags:{},props:[{name:"clientName",type:{name:"string"}},{name:"maxItems",type:{name:"string"}},{name:"detailUrl",type:{name:"object"}},{name:"jobId",type:{name:"string"}},{name:"tags",type:{name:"string"}},{name:"lang",type:{name:"string"}},{name:"team",type:{name:"string"}},{name:"apiUrl",type:{name:"string"}},{name:"headlineClasses",type:{name:"string"}},{name:"headlineLevel",type:{name:"string"}},{name:"headlineText",type:{name:"string"}},{name:"expandText",type:{name:"string"}},{name:"sublineText",type:{name:"string"}},{name:"sticky",type:{name:"object"},defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/job-list.vue"]};const de={title:"Components/Job List",component:ie,argTypes:{}},g={args:{clientName:"c4a8",maxItems:4,expandText:"Weitere Stellenanzeigen",detailUrl:"/de/jobs/",headlineText:"Headline Text",sublineText:"Subline Text",entries:[{title:"Software Engineer",gender:"male",city:"Berlin",team:"Development",positionType:"full-time",isInvisible:!1,id:1},{title:"Product Manager",gender:"female",city:"Munich",team:"Product",positionType:"part-time",isInvisible:!1,id:2}]}};var y,v,L;g.parameters={...g.parameters,docs:{...(y=g.parameters)==null?void 0:y.docs,source:{originalSource:`{
  args: {
    clientName: "c4a8",
    maxItems: 4,
    expandText: "Weitere Stellenanzeigen",
    detailUrl: "/de/jobs/",
    headlineText: "Headline Text",
    sublineText: "Subline Text",
    entries: [{
      title: "Software Engineer",
      gender: "male",
      city: "Berlin",
      team: "Development",
      positionType: "full-time",
      isInvisible: false,
      id: 1
    }, {
      title: "Product Manager",
      gender: "female",
      city: "Munich",
      team: "Product",
      positionType: "part-time",
      isInvisible: false,
      id: 2
    }]
  }
}`,...(L=(v=g.parameters)==null?void 0:v.docs)==null?void 0:L.source}}};const re=["JobList"];export{g as JobList,re as __namedExportsOrder,de as default};
