import{_ as B}from"./D-tlEuJt.js";import{_ as E}from"./Bkl7a_rG.js";import{k as _,l as L,C as N,c as u,a as T,d as k,g as z,t as g,w,J as V,T as y,o as i,K as R,b as h,F as q,r as A,f as $,n as F,e as D,L as H,M as J,S as K}from"./Dnht6_LH.js";const P={class:"aside-nav font-size-1 bold"},U={class:"aside-nav__list"},W=["href","onClick"],j={__name:"aside-nav",props:{menuItems:{type:Array,required:!0}},setup(b){const C=b,r=_(!1),l=_(!1),f=_("");let d=null;const v=()=>{l.value=y.isBelowBreakpoint("lg"),l.value||(r.value=!1)},I=()=>{r.value=!r.value},x=n=>n.startsWith("#"),O=n=>{const m=n.substring(1),a=document.querySelector(`#${m}`);a&&y.scrollIntoView(a,!0),l.value&&(r.value=!1)},M=n=>({"aside-nav__list-item":!0,[K.ACTIVE]:f.value===n.href}),S=()=>{const n=C.menuItems.filter(e=>x(e.href)).map(e=>{const o=e.href.substring(1),t=document.querySelector(`#${o}`);return{id:e.href,element:t}}).filter(e=>e.element),a=-window.innerHeight+200,p=new IntersectionObserver(e=>{const o=e.filter(t=>t.isIntersecting).sort((t,c)=>c.boundingClientRect.top-t.boundingClientRect.top)[0];if(o){const t="#"+o.target.id;f.value=t}},{rootMargin:a+"px 0px 0px 0px",threshold:1}),s=new IntersectionObserver(e=>{const o=e.filter(t=>!t.isIntersecting&&t.boundingClientRect.top>0).sort((t,c)=>t.boundingClientRect.top-c.boundingClientRect.top)[0];if(o){const t=n.findIndex(c=>c.element===o.target);t>0&&(f.value=n[t-1].id)}},{rootMargin:"200px 0px 0px 0px",threshold:1});n.forEach(e=>{p.observe(e.element),s.observe(e.element)}),d={enter:p,leave:s}};return L(()=>{v(),window.addEventListener("resize",v),S()}),N(()=>{window.removeEventListener("resize",v),d&&(d.enter.disconnect(),d.leave.disconnect())}),(n,m)=>{const a=B,p=E;return i(),u("aside",P,[l.value?(i(),u("a",{key:0,class:"aside-nav__toggle",onClick:I},[z(g(n.$t("topicsOnPage")),1),k(a,{icon:"plus-minus",class:"aside-nav__icon-toggle",closed:!r.value},null,8,["closed"])])):T("",!0),k(V,{name:"slide-fade"},{default:w(()=>[R(h("ul",U,[(i(!0),u(q,null,A(b.menuItems,(s,e)=>(i(),u("li",{key:e,class:F(M(s)),style:$({"--item-index":e})},[x(s.href)?(i(),u("a",{key:0,href:s.href,onClick:H(o=>O(s.href),["prevent"]),class:"font-size-1 link"},[h("span",null,g(s.text),1)],8,W)):(i(),D(p,{key:1,to:s.href,target:s.target},{default:w(()=>[h("span",null,g(s.text),1)]),_:2},1032,["to","target"]))],6))),128))],512),[[J,r.value||!l.value]])]),_:1})])}}};j.__docgenInfo={exportName:"default",displayName:"aside-nav",description:"",tags:{},props:[{name:"menuItems",type:{name:"array"},required:!0}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/aside-nav.vue"]};export{j as _};
