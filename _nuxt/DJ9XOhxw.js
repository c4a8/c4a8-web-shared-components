import{_ as M}from"./DnnYjZMT.js";import{_ as j}from"./QH_3yVnO.js";import{_ as q}from"./Cqv3XTBv.js";import{_ as F}from"./CS3v8n-d.js";import{_ as K}from"./DIE0CKG1.js";import{_ as O}from"./5IrTVW-Y.js";import{_ as R}from"./DyJ2CAiM.js";import{_ as W}from"./B9f8h7bc.js";import{_ as V,L as U,e as c,o as r,i as P,m as z,w,c as i,F as k,r as v,n as m,k as X,T as p,K as C,b as n,a as _,d as f,t as S,q as N}from"./BkCUMCv2.js";import{T as G}from"./Cz7lvlok.js";import{u as J}from"./BR7IkwKa.js";import{u as Q}from"./BfhTGY4Y.js";import{_ as B}from"./ByBkiiao.js";const Y={name:"ContentNode",props:{node:{type:[Array,String],required:!0}},methods:{getNodeTag(t){return!Array.isArray(t)||t.length===0?"span":t[0]||"span"},getNodeAttrs(t){if(!Array.isArray(t)||t.length<2||typeof t[1]!="object"||Array.isArray(t[1]))return{};const s={...t[1]};return s.class&&delete s.class,s},getNodeClass(t){if(!Array.isArray(t)||t.length<2)return"";const s=t[1];if(typeof s=="object"&&!Array.isArray(s)&&s.class)return s.class;const o=this.getNodeChildren(t);for(const a of o)if(typeof a=="string"&&a.startsWith("{: ")){const l=a.match(/\{:\s*\.([^}]+)\}/);if(l)return l[1].trim()}return""},getNodeChildren(t){return!Array.isArray(t)||t.length<=2?[]:t.slice(2)},isKramdownAttr(t){return typeof t=="string"&&t.startsWith("{: ")},renderNode(t){if(!Array.isArray(t))return C("span",t);const s=this.getNodeTag(t),o=this.getNodeAttrs(t),a=this.getNodeClass(t),l=this.getNodeChildren(t),e={...o,...a?{class:a}:{}},g=l.filter(d=>!this.isKramdownAttr(d)).map(d=>Array.isArray(d)?this.renderNode(d):d);return C(s,e,g)}},render(){return this.renderNode(this.node)}},L={tagName:"shared-content-renderer",inheritAttrs:!1,components:{ContentNode:Y},computed:{isStorybook(){return p.isStorybook()},value(){return this.$attrs.value},tag(){return this.$attrs.tag||"div"},computedClass(){return this.$attrs.class},bodyNodes(){return!this.value||!this.value.body||!this.value.body.value?[]:this.value.body.value}}};function Z(t,s,o,a,l,e){const g=W,d=U("content-node");return e.isStorybook?(r(),c(X(e.tag||"div"),{key:1,class:m(e.computedClass)},{default:w(()=>[(r(!0),i(k,null,v(e.bodyNodes,(y,b)=>(r(),c(d,{key:b,node:y},null,8,["node"]))),128))]),_:1},8,["class"])):(r(),c(g,P(z({key:0},t.$attrs)),null,16))}const $=V(L,[["render",Z]]);L.__docgenInfo={exportName:"default",displayName:"shared-content-renderer",description:"",tags:{},sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/shared-content-renderer.vue"]};const T={tagName:"post-detail",components:{ContentRendererLink:B},setup(){const{authors:t}=Q(),s=N(!1),o=N(null),a=N(0),l=J();return{authors:t,isAtEnd:s,endPoint:o,stickyContentHeight:a,store:l,ContentRendererLink:B}},data(){return{shouldShowStickyBlocks:!1}},mounted(){if(this.checkStickyBlocks(),window.addEventListener("resize",this.checkStickyBlocks),!this.normalizedPost)return p.gotoHome();this.store.setPageIsLoaded(!0)},unmounted(){window.removeEventListener("resize",this.checkStickyBlocks)},methods:{checkStickyBlocks(){this.shouldShowStickyBlocks=!this.asideNavValue||!p.isBelowBreakpoint("lg")}},computed:{contentWidth(){var t,s;return["richtext",((s=(t=this.post)==null?void 0:t.meta)==null?void 0:s.maxContent)===!0?"richtext--full-width":null]},stickyOffsetTop(){return this.asideNavValue?124:100},asideNavValue(){var t,s;return((s=(t=this.post)==null?void 0:t.meta)==null?void 0:s.asideNav)||null},enhancedPost(){return this.normalizedPost?{...this.normalizedPost,body:{...this.normalizedPost.body,value:p.applyKramdownAttrs(this.normalizedPost.body.value)}}:null},normalizedPost(){return this.post?p.normalizeMarkdownItem(this.post):null},avatars(){var s;return((s=this.normalizedPost)==null?void 0:s.author).filter(o=>{var a;return this.authors&&((a=this.authors[o])==null?void 0:a.avatar)})},blogImagePath(){return p.blogImagePath},formattedDate(){var s;return(s=this.normalizedPost)!=null&&s.date?new Date(this.normalizedPost.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}):""},formattedDateXml(){var s;return(s=this.normalizedPost)!=null&&s.date?new Date(this.normalizedPost.date).toISOString():""}},props:{post:{type:Object,required:!0},shareUrl:{type:String,default:""}}},tt={class:"w-xl-80 mx-xl-auto"},et={key:0,class:"post h-entry",itemscope:"",itemtype:"http://schema.org/BlogPosting",ref:"article"},st={class:"post-header"},rt=["innerHTML"],at={class:"py-4 mt-5"},ot={class:"row align-items-md-center"},nt={key:0,class:"col-md-7 mb-5 mb-md-0"},it={class:"media align-items-center"},lt=["datetime"],ct={class:"post-content e-content",itemprop:"articleBody"},dt=["innerHTML"],ut={key:0,class:"post__title-images"},mt={key:1,class:"post__intro-img"},ht={key:0},_t={class:"post-detail__tags mt-5"},pt={key:1};function gt(t,s,o,a,l,e){const g=M,d=j,y=q,b=F,x=K,D=O,I=R,E=$,H=G;return r(),i("div",{class:m(["post-detail container space-top-2 space-top-lg-4",{"post-detail--aside-nav":e.asideNavValue}])},[n("div",tt,[e.normalizedPost?(r(),i("article",et,[n("header",st,[n("h1",{class:m(["post-title p-name",e.normalizedPost.titleClass||"h2-font-size"]),itemprop:"name headline",innerHTML:e.normalizedPost.title},null,10,rt),n("div",at,[n("div",ot,[o.post.author?(r(),i("div",nt,[n("div",it,[(r(!0),i(k,null,v(e.avatars,u=>{var h,A;return r(),i("div",{key:u,class:"avatar mr-2"},[a.authors&&((h=a.authors[u])!=null&&h.avatar)?(r(),c(g,{key:0,"img-url":(A=a.authors[u])==null?void 0:A.avatar,author:a.authors[u]},null,8,["img-url","author"])):_("",!0)])}),128)),n("div",{class:m(["media-body font-size-1",{"ml-3":e.avatars.length>0}])},[f(d,{"authors-list":e.normalizedPost.author,"data-authors":a.authors},null,8,["authors-list","data-authors"])],2)])])):_("",!0),n("div",{class:m(["col-md-5 align-self-end pr-lg-0",{"pl-lg-0":!o.post.author}])},[n("div",{class:m(["text-muted font-size-1",{"text-right":o.post.author}])},[n("time",{class:"dt-published",datetime:e.formattedDateXml,itemprop:"datePublished"},S(e.formattedDate),9,lt)],2)],2)])])]),n("div",ct,[n("p",{class:"post__sticky-excerpt",innerHTML:e.normalizedPost.customExcerpt||e.normalizedPost.excerpt},null,8,dt),o.post.blogTitleImages?(r(),i("div",ut,[f(b,{"hide-background":!0},{default:w(()=>[(r(!0),i(k,null,v(e.normalizedPost.blogTitleImages,(u,h)=>(r(),c(y,{key:h,cloudinary:u.cloudinary,img:u.img},null,8,["cloudinary","img"]))),128))]),_:1})])):e.normalizedPost.blogtitlepic?(r(),i("div",mt,[f(y,{img:e.blogImagePath+e.normalizedPost.blogtitlepic,cloudinary:!0,alt:e.normalizedPost.title,"img-src-sets":"postImages"},null,8,["img","alt"]),e.normalizedPost.blogtitlepicsubline?(r(),i("figcaption",ht,S(e.normalizedPost.blogtitlepicsubline),1)):_("",!0)])):_("",!0),l.shouldShowStickyBlocks?(r(),c(I,{key:2,class:"post__sticky-bar","sticky-offset-top":e.stickyOffsetTop,"has-padding":!e.asideNavValue,breakpoint:"lg","calculate-height":!0},{default:w(()=>[e.asideNavValue?(r(),c(x,P(z({key:0},e.asideNavValue)),null,16)):(r(),c(D,{key:1,vertical:!0,"hide-label":!0,author:null,"share-url":o.shareUrl},null,8,["share-url"]))]),_:1},8,["sticky-offset-top","has-padding"])):_("",!0),f(E,{value:e.enhancedPost,tag:"main",class:m(e.contentWidth),components:{a:a.ContentRendererLink}},null,8,["value","class","components"]),n("div",_t,[(r(!0),i(k,null,v(e.normalizedPost.tags,(u,h)=>(r(),c(H,{key:h,tag:u,variant:"small"},null,8,["tag"]))),128))]),!l.shouldShowStickyBlocks&&e.asideNavValue?(r(),c(x,P(z({key:3},e.asideNavValue)),null,16)):_("",!0)])],512)):(r(),i("div",pt,[...s[0]||(s[0]=[n("h1",null,"Post not found",-1)])]))])],2)}const Bt=V(T,[["render",gt]]);T.__docgenInfo={exportName:"default",displayName:"post-detail",description:"",tags:{},props:[{name:"post",type:{name:"object"},required:!0},{name:"shareUrl",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/post-detail.vue"]};export{Bt as _};
