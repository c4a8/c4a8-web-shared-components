import{_ as b}from"./GmkXPN7r.js";import{_}from"./CZ3qG1Ry.js";import{_ as E,c,b as s,a as d,m as p,d as h,n as u,e as C,V as n,T as a,S as f,o as l}from"./M1oa9h9V.js";const m={tagName:"fab-button",props:{icon:{type:String,default:"phone-mail"},modal:{type:Object,default:null},noSticky:{type:Boolean,default:!1},bgColor:{type:String,default:null},iconColor:{type:String,default:null},trigger:{type:[String,Number],default:null}},computed:{classList(){return["fab-button",this.noSticky?"":"fab-button--sticky",this.trigger?"fab-button--has-trigger":"",{[this.expandedClass]:this.isExpanded},{[this.hasTriggerClass]:this.hasTrigger}]},iconStyle(){let e={};return this.bgColor&&(e["--color-fab-background"]=this.bgColor),this.iconColor&&(e.color=this.iconColor),e}},data(){return{resetDelay:300,isExpanded:!1,hasTrigger:!1,expandedClass:f.EXPANDED,offScreenClass:f.OFF_SCREEN,hasTriggerClass:"fab-button--has-trigger"}},mounted(){this.iconElement=this.$refs.icon,this.linkElement=this.$refs.link instanceof NodeList?this.$refs.link:[this.$refs.link],this.modalElement=this.$refs.modal,this.closeElement=this.$refs.close,this.root=this.$refs.root,this.hasTrigger=this.root.classList.contains(this.hasTriggerClass),this.init()},methods:{init(){this.bindEvents()},bindEvents(){var e;if(!this.iconElement||!this.modalElement||this.hasTrigger)return this.bindTriggerEvent();this.linkElement.forEach(i=>{i.addEventListener("click",this.handleClick)}),this.iconElement.addEventListener("click",this.handleClick),(e=this.closeElement)==null||e.addEventListener("click",this.handleClose),document.addEventListener(n.FORM_AJAX_SUBMIT,this.handleSubmit),window.addEventListener("click",this.handleOutsideClick),this.modalElement.style.opacity="1",this.modalElement.style.opacity=""},bindTriggerEvent(){this.iconElement.addEventListener("click",this.handleTriggerClick)},handleTriggerClick(e){const t=e.currentTarget.dataset.triggerId;document.dispatchEvent(new CustomEvent(n.OPEN_MODAL,{detail:{id:t}}))},handleOutsideClick(e){this.root.classList.contains(this.expandedClass)&&a.isOutsideOf("fab-button",e)&&a.isOutsideOf("fab-trigger",e)&&this.handleClose(),a.isOutsideOf("fab-trigger",e)||this.handleClick()},handleSubmit(){this.handleClose()},handleClose(){this.handleClick(),setTimeout(()=>{document.dispatchEvent(new CustomEvent(n.FAB_BUTTON_CLOSE,{detail:{target:this.root}}))},this.resetDelay)},handleClick(){this.isExpanded=!this.isExpanded,this.modalElement.classList.toggle(this.offScreenClass),this.modalElement.classList.contains(this.offScreenClass)&&(this.modalElement.style.opacity="")}},beforeDestroy(){window.removeEventListener("click",this.handleOutsideClick),document.removeEventListener(n.FORM_AJAX_SUBMIT,this.handleSubmit)}},k={key:0,class:"fab-button__modal is-off-screen",ref:"modal"},y={class:"fab-button__close",ref:"close"},v={class:"fab-trigger",ref:"link"};function S(e,i,t,T,L,o){const r=b,g=_;return l(),c("div",{class:u(o.classList),ref:"root"},[s("div",{class:u(["fab-button__wrapper",["fab-button__wrapper",t.noSticky?"":"js-sticky-block"]])},[s("div",p({class:"fab-button__icon",ref:"icon",style:o.iconStyle},t.trigger?{"data-trigger-id":t.trigger}:{}),[h(r,{icon:t.icon,size:"large"},null,8,["icon"])],16)],2),t.modal?(l(),c("div",k,[s("div",y,[h(r,{icon:"close",circle:!0,hover:!0,size:"medium"})],512),t.modal.contact?(l(),C(g,{key:0,contact:t.modal.contact.infos,collapsed:!0,ajax:!0},null,8,["contact"])):d("",!0)],512)):d("",!0),s("a",v,null,512)],2)}const w=E(m,[["render",S]]);m.__docgenInfo={exportName:"default",displayName:"fab-button",description:"",tags:{},props:[{name:"icon",type:{name:"string"},defaultValue:{func:!1,value:"'phone-mail'"}},{name:"modal",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"noSticky",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"bgColor",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"iconColor",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"trigger",type:{name:"string|number"},defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/fab-button.vue"]};export{w as F};
