import{_ as v}from"./CDLHQVe0.js";import{_ as g}from"./DyNmStNa.js";import{_ as y,c as h,e as x,a as f,b as s,y as w,n as u,Y as C,t as a,d as r,f as S,A as D,Z as T,F as O,r as A,T as l,S as I,V as b,o as d}from"./sjE8xaCF.js";import{U as M}from"./xOdxwYlk.js";const k={tagName:"dropdown",props:{label:String,items:Array,filterable:{default:null},hasAnimation:{default:null},index:Number},computed:{isStorybook(){return l.isStorybook()},teleportSelector(){return'[id="app"]'},dropdownLabelClasses(){return["dropdown__label font-size-sm",this.hasAnimation?"utility-animation fade-in-bottom":""]},parsedItems(){return l.getJSON(this.items)},filteredItems(){return this.filterableValue&&this.filterText.length>=this.minCharsToFilter?this.parsedItems.filter(t=>t.text.toLowerCase().includes(this.filterText.toLowerCase())):this.parsedItems},filterableValue(){return l.isTrue(this.filterable)===!0},style(){return this.hasAnimation?`--utility-animation-index: ${this.index};`:""}},methods:{initActiveSelection(){this.activeSelection=this.filteredItems.filter(t=>t.checked)},updateUtilityAnimation(){this.hasAnimation&&M.observeElementIfNotAlready(this.$refs.label)},resetSelection(){this.activeSelection=[]},applySelection(){this.toggleDropdown()},handleSelection(t){if(!this.activeSelection.includes(t))this.activeSelection.push(t);else{const n=this.activeSelection.indexOf(t);this.activeSelection.splice(n,1)}this.$emit(b.DROPDOWN_CHANGED,this.activeSelection)},toggleDropdown(){this.isOpen=!this.isOpen,this.isOpen?(this.$emit(b.DROPDOWN_OPENED,this),this.modalOpened()):(this.resetFilterText(),this.modalClosed())},closeModal(){document.body.classList.remove("modal-open")},modalOpened(){l.isUpperBreakpoint()||document.body.classList.add("modal-open")},modalClosed(){l.isUpperBreakpoint()||this.closeModal()},toggleIconClasses(t){return["dropdown__toggle-icon",this.activeSelection.includes(t)?I.ACTIVE:""]},handleMouseEnter(t){if(!l.isUpperBreakpoint())return t.preventDefault();this.toggleDropdown()},handleMouseDown(t){if(!l.isUpperBreakpoint())return t.preventDefault();this.toggleDropdown()},handleClick(t){if(l.isUpperBreakpoint())return t.preventDefault();this.toggleDropdown()},getCheckboxId(t,n){return`dropdown-checkbox-${t.value}-${n}`},resetFilterText(){this.filterText=""},resetModal(){this.isOpen=!1,this.closeModal()},handleResize(){this.resetModal()}},beforeMount(){this.initActiveSelection()},mounted(){this.updateUtilityAnimation(),window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},data(){return{activeSelection:[],isOpen:!1,filterText:"",minCharsToFilter:1}}},N={class:"dropdown__label-text"},z={class:"dropdown__label-placeholder"},E={class:"dropdown__label-icon"},V={class:"dropdown__items"},U={class:"dropdown__items-content"},B={class:"dropdown__items-header"},L={class:"dropdown__items-header-text"},F={key:0,class:"dropdown__search-container"},R=["placeholder"],P={class:"dropdown__items-list"},j=["onClick"],W=["value","id","name","checked"],G=["for"],H={class:"dropdown__item-text"},J={class:"dropdown__item-count"},Y={class:"dropdown__buttons"};function Z(t,n,_,q,i,e){const c=v,m=g;return d(),h("div",{class:u({"dropdown--opened":i.isOpen,dropdown:!0,"dropdown--filtering":i.filterText.length>0}),onMouseenter:n[3]||(n[3]=(...o)=>e.handleMouseEnter&&e.handleMouseEnter(...o)),onMouseleave:n[4]||(n[4]=(...o)=>e.handleMouseDown&&e.handleMouseDown(...o))},[e.isStorybook?f("",!0):(d(),x(C,{key:0,to:e.teleportSelector},[s("div",{class:u({"dropdown__background-shim":!0,show:i.isOpen}),onClick:n[0]||(n[0]=(...o)=>e.toggleDropdown&&e.toggleDropdown(...o))},null,2)],8,["to"])),s("div",{class:u(e.dropdownLabelClasses),onClick:n[1]||(n[1]=(...o)=>e.handleClick&&e.handleClick(...o)),style:S(e.style),"data-utility-animation-step":"1",ref:"label"},[s("span",N,a(_.label),1),s("span",z,a(_.label),1),s("span",E,[r(c,{icon:"arrow-narrow",direction:"clockwise",size:"xs"})])],6),w(s("div",V,[s("div",U,[s("div",B,[s("span",L,a(_.label),1),r(c,{onClick:e.toggleDropdown,class:"dropdown__items-close-icon",icon:"close",size:"medium"},null,8,["onClick"])]),e.filterableValue?(d(),h("div",F,[w(s("input",{type:"text",class:"dropdown__search","onUpdate:modelValue":n[2]||(n[2]=o=>i.filterText=o),placeholder:t.$t("search")},null,8,R),[[T,i.filterText]]),r(c,{class:"dropdown__search-icon",icon:"magnifier",size:"small"}),r(c,{onClick:e.resetFilterText,class:"dropdown__close-icon",icon:"close",size:"small"},null,8,["onClick"])])):f("",!0),s("div",P,[(d(!0),h(O,null,A(e.filteredItems,(o,p)=>(d(),h("div",{class:u(e.toggleIconClasses(o)),onClick:K=>e.handleSelection(o),key:p},[s("input",{class:"dropdown__checkbox",type:"checkbox",value:o.value,id:e.getCheckboxId(o,p),name:e.getCheckboxId(o,p),checked:i.activeSelection.includes(o)},null,8,W),s("label",{class:"dropdown__checkbox-label",for:e.getCheckboxId(o,p)},null,8,G),s("span",H,a(o.text),1),s("span",J,a(o.count),1)],10,j))),128))]),s("div",Y,[r(m,{text:t.$t("apply"),class:"dropdown__apply-button",href:"#apply",onClick:e.applySelection},null,8,["text","onClick"]),r(m,{text:t.$t("reset"),class:"dropdown__reset-button",skin:"secondary",button:!0,href:"#reset",onClick:e.resetSelection},null,8,["text","onClick"])])])],512),[[D,i.isOpen]])],34)}const te=y(k,[["render",Z]]);k.__docgenInfo={exportName:"default",displayName:"dropdown",description:"",tags:{},props:[{name:"label",type:{name:"string"}},{name:"items",type:{name:"array"}},{name:"filterable",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"hasAnimation",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"index",type:{name:"number"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/dropdown.vue"]};export{te as D};
