import{_ as M}from"./BpH5EwoC.js";import{T as u,S as c,_ as S,c as h,o as d,b as l,a as f,F as _,g as v,t as m,n as x,d as J,r as U,aq as R,e as k}from"./CKOiqI2k.js";import{S as V}from"./erL7dn4s.js";const O=window.setInterval;class A{constructor(t,e){this.root=t,this.maxShapes=3,this.loadingClass="loading",this.shapeClass="loading__shape",this.bounceClasses={up:"loading--bounce-up",down:"loading--bounce-down"},this.types=["circle","square","triangle","triangle-2","rectangle"],this.colors=["--color-loading--1","--color-loading--2","--color-loading--3","--color-loading--4"],this.currentColors={},this.maxRuns=20,this.scaleMin=4,this.scaleMax=5,this.rotationMin=90,this.rotationMax=270,this.animationInterval=800,this.intervals=[],this.hasShapes=!1,this.init(e)}getRandomColor(t){let e=this.colors[Math.floor(Math.random()*this.colors.length)];return t<this.maxRuns&&this.currentColors[e]&&(t++,e=this.getRandomColor(t)),e}getRandomType(){return this.types[Math.floor(Math.random()*this.types.length)]}getRandomTypeClass(){return`loading__shape--${this.getRandomType()}`}getRandomScale(){return Math.floor(Math.random()*(this.scaleMax-this.scaleMin+1))+this.scaleMin}getRandomRotation(){return Math.floor(Math.random()*(this.rotationMin-this.rotationMax+1))+this.rotationMin}getRandomOffset(){let t=Math.random()*6-2;return`${t>=0?"+ ":"- "}${t}`}getRandomStyle(){const t=this.getRandomColor();return{style:`
      left: calc(50% ${this.getRandomOffset()}vw);
      --color-loading: var(${t});
      --loading-scale: ${this.getRandomScale()}vh;
      --loading-rotation: ${this.getRandomRotation()}deg
    `,color:t}}createShapes(){for(var t=0;t<this.maxShapes;t++){const e=document.createElement("shape"),a=u.append(this.root,e);this.startAnimation(a)}}startAnimation(t){this.intervals.push(O(()=>{const e=this.getRandomStyle();this.currentColors[e.color]=!0,t.className="",t.classList.add(this.getRandomTypeClass()),t.classList.add(this.shapeClass),t.setAttribute("style",e.style),t.classList.contains(this.bounceClasses.up)?t.classList.replace(this.bounceClasses.down,this.bounceClasses.up):t.classList.add(this.bounceClasses.up),setTimeout(()=>{t.classList.replace(this.bounceClasses.up,this.bounceClasses.down),this.currentColors[e.color]=!1},this.animationInterval/2)},this.animationInterval))}init(t){if(t&&typeof t=="function")return t();this.root.classList.add(this.loadingClass)}on(t){this.hasShapes||(this.hasShapes=!0,this.createShapes()),t!==!0&&this.root.classList.add(c.LOADING)}clear(){this.intervals.forEach(t=>{clearInterval(t)})}off(t,e){t?this.clear():setTimeout(()=>{this.clear(),e!==!0&&this.root.classList.remove(c.LOADING)},100)}}const I={tagName:"job-list-entry",computed:{classList(){return["job-list__entry",`${u.isTrue(this.isInvisible)===!0?c.HIDDEN:""}`,"vue-component"]}},props:{title:String,gender:String,city:String,team:String,positionType:String,isInvisible:{default:null},id:Number}},B=["data-id"],F={class:"job-list__entry-header"},P={class:"job-list__entry-content"},z={class:"job-list__entry-title"},G={class:"job-list__entry-gender"};function H(i,t,e,a,o,n){return d(),h("div",{class:x(n.classList),"data-id":e.id},[l("div",F,[e.team&&e.team!==""?(d(),h(_,{key:0},[v(m(e.team),1)],64)):f("",!0)]),l("div",P,[l("div",z,[v(m(e.title)+" ",1),l("span",G,m(e.gender),1)])])],10,B)}const $=S(I,[["render",H]]);I.__docgenInfo={exportName:"default",displayName:"job-list-entry",description:"",tags:{},props:[{name:"title",type:{name:"string"}},{name:"gender",type:{name:"string"}},{name:"city",type:{name:"string"}},{name:"team",type:{name:"string"}},{name:"positionType",type:{name:"string"}},{name:"isInvisible",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"id",type:{name:"number"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/job-list-entry.vue"]};const C={tagName:"job-list",computed:{classList(){return["job-list container",`${this.hasLoading?c.LOADING:""}`,`${this.hasLoader?"loading":""}`,`${u.isTrue(this.sticky)===!0?V.rootSelector.substring(1):""}`,"vue-component"]},expandClassList(){return["job-list__expand-button",`${this.hasExpand?"":c.HIDDEN}`,`${this.isExpandVisible?"":c.INVISIBLE}`]},headlineClassValue(){return`job-list__headline ${this.headlineClasses}`},headlineLevelValue(){return`${this.headlineLevel?this.headlineLevel:"h2"}`},tagList(){return this.tags?this.tags.split(","):void 0}},mounted(){this.api=new R({...this.jobId&&{jobId:this.jobId},...this.apiUrl&&{apiUrl:this.apiUrl},client_name:this.clientName}),this.lang&&this.api.setLang(this.lang),this.tagList&&this.api.setFilter({tags:this.tagList}),this.loading=new A(this.$refs["job-list"],()=>{this.hasLoader=!0}),this.loading.on(!0),this.init()},methods:{init(){var e;const i=(e=window.i18n)==null?void 0:e.loader,t=this.jobId?this.loadJob:this.loadJobs;i?i.then(()=>{var a;this.translationData=(a=window.i18n)==null?void 0:a.getTranslationData(["jobListEmpty"]),t.bind(this)()}):t()},handleExpand(){this.isExpandVisible=!1,this.hasExpand=!1,this.showJobs()},showJobs(){this.entries.forEach(i=>{i.isInvisible=!1})},loadJobData(){const i=`${this.api.jobDataUrl}jobs.json`;return fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{this.jobData=t}).catch(t=>{console.error("Job-list Local Job Data Error:",t)})},loadJob(i){const t=i?"getAll":"getOpening";this.promises.push(this.loadJobData()),this.api[t]().then(e=>e.json()).then(e=>{this.handleJobs(e)}).catch(e=>{console.error("Job-list Error:",e)})},loadJobs(){this.loadJob(!0)},handleJobs(i){u.sleep(this.sleepDelay).then(()=>{let t=i;if(typeof t.objects!="object"&&(t={objects:[t],meta:t==null?void 0:t.meta}),this.data=t,!this.data.meta)return this.loading.off();Promise.all(this.promises).then(()=>{const e=this.api.getOrderedList(t.objects);this.filterJobs(i,e)}).catch(e=>{console.error("Job-List Promises.all ~ error",e)})})},filterJobs(i,t){var n,g,p;this.data.objects=t;const e=(n=window.i18n)==null?void 0:n.translate("gender"),a=[];let o=0;for(let r=0;r<(t==null?void 0:t.length);r++){const s=t[r],{city:E}=(s==null?void 0:s.location)||{};if(!s)continue;const{title:w,position_type:j,team:D}=s,N={city:E,title:w,gender:e,team:D,positionType:j!==""?(g=window.i18n)==null?void 0:g.translate(j):null,isInvisible:this.maxItems>0&&o>this.maxItems-1,id:r};this.isAvailableEntry(s)&&(a[r]=N,o++)}this.entries=a,this.entries.length===0&&(this.isEmpty=!0),this.maxItems>0&&((p=i.objects)==null?void 0:p.length)>this.maxItems&&this.showExpandButton(),this.stopLoading()},showExpandButton(){this.hasExpand=!0,setTimeout(()=>{this.isExpandVisible=!0},this.loadingDelay)},isAvailableEntry(i){var e;let t=!0;if(i.tags.includes(this.api.hiddenTag))return!1;if(this.team){const a=(e=i.team)==null?void 0:e.toLowerCase(),o=this.team.toLowerCase();(a===void 0||(a==null?void 0:a.indexOf(o))===-1)&&(t=!1)}return t},stopLoading(){setTimeout(()=>{this.loading.off(!0,!0),this.hasLoading=!1},this.loadingDelay)},handleEntryClick(i){const t=i.currentTarget;if(t&&this.detailUrl){const e=this.getData(t),a=this.getDetailUrl(e),o=u.generateUrl(e==null?void 0:e.title,a,e==null?void 0:e.id);document.location.href=o}},getData(i){var e;let t=null;return i&&i.dataset.id&&((e=this.data)!=null&&e.objects)&&(t=this.data.objects[i.dataset.id]),t},getDetailUrl(i){if(typeof this.detailUrl!="object")return this.detailUrl;const t=this.api.getLangFromEntry(i);return this.detailUrl[t]||this.detailUrl.default}},data(){return{loadingDelay:300,sleepDelay:1300,loading:{},hasLoading:!0,hasLoader:!1,api:{},hasExpand:!1,isExpandVisible:!1,entries:[],jobData:{},promises:[],isEmpty:!1}},props:{clientName:String,maxItems:String,detailUrl:Object,jobId:String,tags:String,lang:String,team:String,apiUrl:String,headlineClasses:String,headlineLevel:String,headlineText:String,expandText:String,sublineText:String,sticky:{default:null}}},q=["data-id","data-max-items","data-detail-url","data-job-id","data-tags","data-lang","data-team","data-api-url"],W={class:"row"},K={class:"job-list__header col-lg-12"},Q={key:0,class:"job-list__meta col-lg-7"},X={class:"job-list__subline"},Y={class:"col-lg-12"},Z={class:"job-list__entries"},tt={key:0,class:"job-list__message h3-font-size"};function et(i,t,e,a,o,n){var r;const g=M,p=$;return d(),h("div",{class:x(n.classList),"data-id":e.clientName,"data-max-items":e.maxItems,"data-detail-url":e.detailUrl,"data-job-id":e.jobId,"data-tags":e.tags,"data-lang":e.lang,"data-team":e.team,"data-api-url":e.apiUrl,ref:"job-list"},[l("div",W,[l("div",K,[J(g,{text:e.headlineText,level:n.headlineLevelValue,classes:n.headlineClassValue},null,8,["text","level","classes"])]),e.sublineText!==""?(d(),h("div",Q,[l("div",X,m(e.sublineText),1)])):f("",!0),l("div",Y,[l("div",Z,[o.isEmpty?(d(),h("div",tt,m((r=i.translationData)==null?void 0:r.jobListEmpty),1)):f("",!0),(d(!0),h(_,null,U(o.entries,s=>(d(),h(_,{key:s==null?void 0:s.id},[s?(d(),k(p,{key:0,title:s==null?void 0:s.title,gender:s==null?void 0:s.gender,city:s==null?void 0:s.city,team:s==null?void 0:s.team,"position-type":s==null?void 0:s.positionType,"is-invisible":s==null?void 0:s.isInvisible,id:s==null?void 0:s.id,onClick:n.handleEntryClick},null,8,["title","gender","city","team","position-type","is-invisible","id","onClick"])):f("",!0)],64))),128))]),l("div",{class:x(n.expandClassList),onClick:t[0]||(t[0]=(...s)=>n.handleExpand&&n.handleExpand(...s))},m(e.expandText),3)])])],10,q)}const st=S(C,[["render",et]]);C.__docgenInfo={exportName:"default",displayName:"job-list",description:"",tags:{},props:[{name:"clientName",type:{name:"string"}},{name:"maxItems",type:{name:"string"}},{name:"detailUrl",type:{name:"object"}},{name:"jobId",type:{name:"string"}},{name:"tags",type:{name:"string"}},{name:"lang",type:{name:"string"}},{name:"team",type:{name:"string"}},{name:"apiUrl",type:{name:"string"}},{name:"headlineClasses",type:{name:"string"}},{name:"headlineLevel",type:{name:"string"}},{name:"headlineText",type:{name:"string"}},{name:"expandText",type:{name:"string"}},{name:"sublineText",type:{name:"string"}},{name:"sticky",type:{name:"object"},defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/job-list.vue"]};const ot={title:"Components/Job List",component:st,argTypes:{}},b={args:{clientName:"c4a8",maxItems:4,expandText:"Weitere Stellenanzeigen",detailUrl:"/de/jobs/",headlineText:"Headline Text",sublineText:"Subline Text",entries:[{title:"Software Engineer",gender:"male",city:"Berlin",team:"Development",positionType:"full-time",isInvisible:!1,id:1},{title:"Product Manager",gender:"female",city:"Munich",team:"Product",positionType:"part-time",isInvisible:!1,id:2}]}};var y,L,T;b.parameters={...b.parameters,docs:{...(y=b.parameters)==null?void 0:y.docs,source:{originalSource:`{
  args: {
    clientName: "c4a8",
    maxItems: 4,
    expandText: "Weitere Stellenanzeigen",
    detailUrl: "/de/jobs/",
    headlineText: "Headline Text",
    sublineText: "Subline Text",
    entries: [{
      title: "Software Engineer",
      gender: "male",
      city: "Berlin",
      team: "Development",
      positionType: "full-time",
      isInvisible: false,
      id: 1
    }, {
      title: "Product Manager",
      gender: "female",
      city: "Munich",
      team: "Product",
      positionType: "part-time",
      isInvisible: false,
      id: 2
    }]
  }
}`,...(T=(L=b.parameters)==null?void 0:L.docs)==null?void 0:T.source}}};const lt=["JobList"];export{b as JobList,lt as __namedExportsOrder,ot as default};
