import{_ as B}from"./BTq4FdOr.js";import{_ as E}from"./DBoKx5Rk.js";import{q as _,s as M,v as N,c as u,a as T,d as k,g as L,t as g,w,x as V,T as y,o as i,y as q,b as h,F as A,r as R,f as $,n as F,e as D,z as H,A as P,S as U}from"./D8ABe6JR.js";const W={class:"aside-nav font-size-1 bold"},j={class:"aside-nav__list"},G=["href","onClick"],J={__name:"aside-nav",props:{menuItems:{type:Array,required:!0}},setup(b){const I=b,r=_(!1),l=_(!1),f=_("");let d=null;const v=()=>{l.value=y.isBelowBreakpoint("lg"),l.value||(r.value=!1)},C=()=>{r.value=!r.value},x=n=>n.startsWith("#"),O=n=>{const m=n.substring(1),a=document.querySelector(`#${m}`);a&&y.scrollIntoView(a,!0),l.value&&(r.value=!1)},S=n=>({"aside-nav__list-item":!0,[U.ACTIVE]:f.value===n.href}),z=()=>{const n=I.menuItems.filter(e=>x(e.href)).map(e=>{const o=e.href.substring(1),t=document.querySelector(`#${o}`);return{id:e.href,element:t}}).filter(e=>e.element),a=-window.innerHeight+200,p=new IntersectionObserver(e=>{const o=e.filter(t=>t.isIntersecting).sort((t,c)=>c.boundingClientRect.top-t.boundingClientRect.top)[0];if(o){const t="#"+o.target.id;f.value=t}},{rootMargin:a+"px 0px 0px 0px",threshold:1}),s=new IntersectionObserver(e=>{const o=e.filter(t=>!t.isIntersecting&&t.boundingClientRect.top>0).sort((t,c)=>t.boundingClientRect.top-c.boundingClientRect.top)[0];if(o){const t=n.findIndex(c=>c.element===o.target);t>0&&(f.value=n[t-1].id)}},{rootMargin:"200px 0px 0px 0px",threshold:1});n.forEach(e=>{p.observe(e.element),s.observe(e.element)}),d={enter:p,leave:s}};return M(()=>{v(),window.addEventListener("resize",v),z()}),N(()=>{window.removeEventListener("resize",v),d&&(d.enter.disconnect(),d.leave.disconnect())}),(n,m)=>{const a=B,p=E;return i(),u("aside",W,[l.value?(i(),u("a",{key:0,class:"aside-nav__toggle",onClick:C},[L(g(n.$t("topicsOnPage")),1),k(a,{icon:"plus-minus",class:"aside-nav__icon-toggle",closed:!r.value},null,8,["closed"])])):T("",!0),k(V,{name:"slide-fade"},{default:w(()=>[q(h("ul",j,[(i(!0),u(A,null,R(b.menuItems,(s,e)=>(i(),u("li",{key:e,class:F(S(s)),style:$({"--item-index":e})},[x(s.href)?(i(),u("a",{key:0,href:s.href,onClick:H(o=>O(s.href),["prevent"]),class:"font-size-1 link"},[h("span",null,g(s.text),1)],8,G)):(i(),D(p,{key:1,to:s.href,target:s.target},{default:w(()=>[h("span",null,g(s.text),1)]),_:2},1032,["to","target"]))],6))),128))],512),[[P,r.value||!l.value]])]),_:1})])}}};J.__docgenInfo={exportName:"default",displayName:"aside-nav",description:"",tags:{},props:[{name:"menuItems",type:{name:"array"},required:!0}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/aside-nav.vue"]};export{J as _};
