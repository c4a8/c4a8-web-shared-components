var b=Object.defineProperty;var x=(c,t,e)=>t in c?b(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var g=(c,t,e)=>x(c,typeof t!="symbol"?t+"":t,e);import{_ as C}from"./BZnZ1zpj.js";import{T as h,S as w,_ as v,c as p,b as n,t as u,n as S,a as E,g as A,d as T,f as m,o as f}from"./AtAUNdjP.js";class d{constructor(){}start({duration:t,timing:e,draw:s}){const o=performance.now();this.requestId;const i=this;this.requestId=requestAnimationFrame(function r(a){let l=(a-o)/t;l>1&&(l=1);const H=e(l);s(H),l<1&&(i.requestId=requestAnimationFrame(r))})}pause(){cancelAnimationFrame(this.requestId)}}g(d,"easing",{linear(t){return t},easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}});class _{constructor(t){var e;this.root=t,this.targetSelector=".js-toggle-switch",this.target=this.root.querySelector(this.targetSelector),this.duration=400,this.parsePricingData=(e=this.root.querySelector("[data-pricing]"))==null?void 0:e.dataset.pricing,this.bindEvents(),this.initPrices()}getTargetSelectors(t){const s=JSON.parse(t.dataset.toggleSwitchOptions).targetSelector.split(","),o=[];for(let i=0;i<s.length;i++){const r=s[i].replace(/\s/g,"");o.push(r)}return o}handleChange(t){const e=t.currentTarget,s=e.checked,i=JSON.parse(e.dataset.toggleSwitchOptions).targetSelector.split(","),r=i.some(a=>a.includes("pricing"));for(let a=0;a<i.length;a++){const l=i[a].replace(/\s/g,"");this.switchData(l,s,r)}[].forEach.call(document.querySelectorAll("[data-alternative-href]"),a=>{this.switchButtonHrefs(a,s)})}switchButtonHrefs(t,e){t.dataset.originalHref||(t.dataset.originalHref=t.href),t.href=e?t.dataset.originalHref:t.dataset.alternativeHref}pricingData(){return this.parsePricingData?JSON.parse(this.parsePricingData):{format:"de-DE",currency:"EUR",defaultPlan:"monthly"}}priceFormatter(){const t=this.pricingData();return h.getPriceFormatter(t)}switchAnimation(t,e,s){new d().start({duration:this.duration,timing:d.easing.easeInOutCubic,draw:i=>{const r=i*(s-e)+e;h.updateElementPrice(t,r,this.priceFormatter())}})}initPrices(){this.getTargetSelectors(this.target).forEach(e=>{document.querySelectorAll(e).forEach(o=>{o.dataset.currencyFormat!==void 0&&h.updateElementPrice(o,o.innerHTML,this.priceFormatter())})})}switchData(t,e,s){const o=document.querySelectorAll(t);for(let i=0;i<o.length;i++){const r=o[i];s?this.handlePriceSwitch(r,e):this.handleForms(r,t)}}handlePriceSwitch(t,e){const s=JSON.parse(t.dataset.toggleSwitchItemOptions),o=e?s.monthly:s.annual,i=e?s.annual:s.monthly;this.switchAnimation(t,o,i)}handleForms(t,e){const s=t.className.includes(w.HIDDEN),o=e.startsWith(".")?e.substring(1):e;t.className=o+" "+(s?"":w.HIDDEN)}bindEvents(){this.target.addEventListener("change",this.handleChange.bind(this))}static init(){this.instances=[],[].forEach.call(document.querySelectorAll(this.rootSelector),t=>{this.instances.push(new this(t))})}}g(_,"rootSelector",".toggle-switch");const y={props:{toggleSwitch:{type:Object,default:()=>({})},toggleSwitchHasAnimation:{type:Boolean,default:!1},products:{type:Object}},mounted(){this.$refs.root&&new _(this.$refs.root)},computed:{toggleSwitchTextLeft(){return this.toggleSwitch.textLeft||"Monthly"},toggleSwitchTextRight(){return this.toggleSwitch.textRight||"Annual"},toggleSwitchHint(){return this.toggleSwitch.hint||null},toggleSwitchHintText(){return this.toggleSwitchHint&&this.toggleSwitchHint.text||"Save up to 10%"},toggleSwitchHintBgColor(){return this.toggleSwitchHint&&this.toggleSwitchHint.bgColor||"var(--color-secondary)"},toggleSwitchHintColor(){return this.toggleSwitchHint&&this.toggleSwitchHint.color||"var(--color-white)"},toggleSwitchId(){return this.toggleSwitch.id||"customToggleSwitch"},toggleSwitchTargetSelector(){return this.toggleSwitch.targetSelector||"#pricingCount1, #pricingCount2, #pricingCount3"},toggleSwitchLimit(){return this.toggleSwitch.limit||!1},defaultPlan(){return this.products&&this.products.pricing&&this.products.pricing.defaultPlan},toggleSwitchActive(){return this.toggleSwitch.active||this.defaultPlan==="annual"},toggleSwitchLimitLeftClass(){return this.toggleSwitchLimit?"toggle-switch__text--right":""},toggleSwitchClasses(){return["toggle-switch","overflow-hidden","d-flex","justify-content-center","align-items-center","pt-6","mb-5",this.toggleSwitchHasAnimation?"utility-animation fade-in-bottom":""]}}},N=["for"],P=["id","checked","data-toggle-switch-options"],D={class:"font-size-1 position-relative text-muted toggle-switch__text"},I={key:0,class:"position-absolute row toggle-switch__hint"};function q(c,t,e,s,o,i){const r=C;return f(),p("div",{class:S(i.toggleSwitchClasses),"data-utility-animation-step":"1",ref:"root"},[n("span",{class:S(["font-size-1 text-muted toggle-switch__text",i.toggleSwitchLimitLeftClass])},u(i.toggleSwitchTextLeft),3),n("label",{class:"mx-2",for:i.toggleSwitchId},[n("input",{type:"checkbox",class:"js-toggle-switch toggle-switch-input",id:i.toggleSwitchId,checked:i.toggleSwitchActive,"data-toggle-switch-options":JSON.stringify({targetSelector:i.toggleSwitchTargetSelector})},null,8,P),t[0]||(t[0]=n("span",{class:"toggle-switch-label"},[n("span",{class:"toggle-switch-indicator"})],-1))],8,N),n("span",D,[i.toggleSwitchHint?(f(),p("div",I,[T(r,{icon:"arrow-curl",size:"small"}),n("span",{class:"badge-pill toggle-switch__hint-text",style:m({backgroundColor:i.toggleSwitchHintBgColor})},[n("span",{class:"small",style:m({color:i.toggleSwitchHintColor})},u(i.toggleSwitchHintText),5)],4)])):E("",!0),A(" "+u(i.toggleSwitchTextRight),1)])],2)}const B=v(y,[["render",q]]);y.__docgenInfo={exportName:"default",displayName:"toggle-switch",description:"",tags:{},props:[{name:"toggleSwitch",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"toggleSwitchHasAnimation",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"products",type:{name:"object"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/toggle-switch.vue"]};export{B as T};
