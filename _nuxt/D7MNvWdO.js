import{_ as U,c as h,o as _,a as y,b as i,d as r,e as F,w as k,g as C,t as W,n as R,h as G,i as M,U as j,as as Y,I as Z,V as b,G as g,T as S,aO as H,W as D,F as J}from"./CZWkLJ5X.js";import{_ as Q}from"./BMO5AoYX.js";import{_ as X}from"./CwH31ri4.js";import{_ as $}from"./htPf0Juc.js";import{_ as tt}from"./BU50mI4o.js";import{_ as et}from"./D_kBvxhO.js";import{_ as ot}from"./CLW4tNTf.js";import{_ as at}from"./DOWx9DkK.js";import{u as st}from"./DFIppR-s.js";import{_ as nt}from"./D-XeA-d7.js";import{u as rt}from"./Dao9USuE.js";import{u as N,q as A}from"./CLwpSMjP.js";import{u as ct}from"./XOD7fAMc.js";import"./BxJzec8G.js";import"./D_Q4lDQN.js";import"./DPL8tNAx.js";import"./CsozlDzw.js";import"./BHu6ejs_.js";import"./D4P7WmV0.js";import"./rWWPhF_O.js";import"./BTx0okJ8.js";import"./BBqTnBcz.js";import"./BLPT8R3_.js";import"./mOb6Ow04.js";import"./BXcfjy-Q.js";const K={tagName:"author",data(){return{sortBy:{moment:-1}}},setup(){const{locale:o}=j(),t=st();return{locale:o,store:t}},computed:{postCount(){var o;return((o=this.posts)==null?void 0:o.length)||0},introText(){var e,d,p;if(this.locale==="de")return(e=this.person)==null?void 0:e.description;const o="en";let t=(d=this.person)==null?void 0:d.otherLanguages[this.locale];return t||(t=(p=this.person)==null?void 0:p.otherLanguages[o],t)},intro(){return{body:{type:"minimal",value:[this.introText]}}},imageUrl(){var o;return this.personData?""+((o=this.personData)==null?void 0:o.avatar):""},hasSocials(){var o;return(o=this.personData)==null?void 0:o.socials},servicesData(){return{author:this.personData,title:this.person.title}},showSocials(){var o,t;return((o=this.personData)==null?void 0:o.twitter)||((t=this.personData)==null?void 0:t.linkedin)}},mounted(){this.store.setPageIsLoaded(!0)},props:{person:{type:Object},personData:{type:Object},posts:{type:Array},events:{type:Array},dataAuthors:{type:Object}}},ut={key:0,class:"author"},lt={key:0},it={class:"row mb-4 mb-lg-5",style:{display:"none"}},mt={class:"author__meta col-lg-8 mt-lg-5 mb-2 mb-lg-0"},_t={itemprop:"author",itemscope:"",itemtype:"http://schema.org/Person"},pt={class:"author__intro-block row"},ht={class:"author__intro font-size-2 col-lg-8 pl-lg-0"},dt={key:0,class:"author__events row mt-lg-5"},vt={class:"author__posts"},yt={class:"author__posts-list mt-6 pt-6"},gt={key:1};function ft(o,t,e,d,p,c){const m=Q,u=X,B=$,f=tt,s=et,v=ot,w=at;return e.person?(_(),h("div",ut,[e.personData?(_(),h("div",lt,[i("div",it,[c.imageUrl?(_(),F(m,{key:0,"class-list":"col-6 col-sm-4 col-lg-2 pl-lg-0 mb-5 mb-lg-0",author:e.person,"img-url":c.imageUrl},null,8,["author","img-url"])):y("",!0),i("div",mt,[i("span",_t,[r(u,{level:"h1",classes:"author__name h2",itemprop:"name"},{default:k(()=>[C(W(e.personData.display_name),1)]),_:1})])])]),r(B,{"img-url":c.imageUrl,author:e.personData,"post-count":c.postCount},null,8,["img-url","author","post-count"]),i("div",pt,[i("div",ht,[r(f,{value:c.intro,tag:"p"},null,8,["value"])]),c.showSocials?(_(),h("div",{key:0,class:R(["author__socials col-lg-4",c.hasSocials?"pt-lg-4":""])},[r(s,G(M(c.servicesData)),null,16)],2)):y("",!0)]),e.events&&e.events.length>0?(_(),h("div",dt,[r(v,{events:e.events,"sort-by":p.sortBy},null,8,["events","sort-by"])])):y("",!0),i("div",vt,[i("div",yt,[r(w,{items:e.posts,view:"list-view","data-authors":e.dataAuthors},null,8,["items","data-authors"])])])])):y("",!0)])):(_(),h("div",gt,[r(u,null,{default:k(()=>[...t[0]||(t[0]=[C("Author not found",-1)])]),_:1})]))}const wt=U(K,[["render",ft]]);K.__docgenInfo={exportName:"default",displayName:"author",description:"",tags:{},props:[{name:"person",type:{name:"object"}},{name:"personData",type:{name:"object"}},{name:"posts",type:{name:"array"}},{name:"events",type:{name:"array"}},{name:"dataAuthors",type:{name:"object"}}],sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/components/author.vue"]};const xt={class:"container space-top-2 space-top-lg-4"},bt={__name:"[...slug]",async setup(o){var q,L;let t,e;const{strategy:d}=j(),p=Y(),m=Z().$i18n.locale;let u=p.path.replace(/^\/[a-z]{2}\//,"/").replace("/authors","");u=u.endsWith("/")?u:u+"/";const f="author-"+u.replaceAll("/",""),{data:s}=([t,e]=b(()=>N(f,()=>A("authors").path(u).first(),"$_VNPo_jlWY")),t=await t,e(),t),{authors:v}=rt(),w=g(()=>{var a;return v?v[(a=s==null?void 0:s.value)==null?void 0:a.title]:null}),x=g(()=>{var a;return(a=s==null?void 0:s.value)==null?void 0:a.title}),V="content-"+m.value+"-"+((q=s.value)==null?void 0:q.stem),{data:I}=([t,e]=b(()=>N(V,async()=>{const a="content_"+m.value;let n=A(a).where("path","LIKE","/posts/%");return n=n.where("author","LIKE",`%${x.value}%`),n.all()},"$E-6V9TZWNt")),t=await t,e(),t),E=g(()=>I.value?[...I.value].map(a=>{const l=S.normalizeMarkdownItem(a);return l.url=S.addPathPrefix(l.url,m.value,d),l}).sort((a,l)=>{const n=new Date(a.moment);return new Date(l.moment)-n}):[]),T="content-events-"+m.value+"-"+((L=s.value)==null?void 0:L.stem),{data:z}=([t,e]=b(()=>N(T,async()=>{const a="content_"+m.value;let n=A(a).where("path","LIKE","/events/%");return n=n.where("author","LIKE",`%${x.value}%`),n.all()},"$bmpwNSB6B8")),t=await t,e(),t);return g(()=>{if(s.value&&s.value.stem)return!0}).value&&ct({title:x}),(a,l)=>{const n=H,P=wt,O=nt;return _(),h(J,null,[r(n),r(O,null,{default:k(()=>[i("div",xt,[r(P,{person:D(s),"person-data":w.value,posts:E.value,events:D(z),"data-authors":D(v)},null,8,["person","person-data","posts","events","data-authors"])])]),_:1})],64)}}};bt.__docgenInfo={exportName:"default",displayName:"[...slug]",description:"",tags:{},sourceFiles:["/home/runner/work/c4a8-web-shared-components/c4a8-web-shared-components/nuxt/pages/authors/[...slug].vue"]};export{bt as default};
